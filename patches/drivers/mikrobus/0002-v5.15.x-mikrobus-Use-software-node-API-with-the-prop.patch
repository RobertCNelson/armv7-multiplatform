From a05f98ae5794c56d341d612c794e949f8ecc6a86 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Mon, 1 Nov 2021 11:39:04 -0500
Subject: [PATCH 2/2] v5.15.x: mikrobus: Use software node API with the
 properties

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 drivers/misc/mikrobus/mikrobus_core.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/misc/mikrobus/mikrobus_core.c b/drivers/misc/mikrobus/mikrobus_core.c
index 4e24f980f18a..5700396b83e4 100644
--- a/drivers/misc/mikrobus/mikrobus_core.c
+++ b/drivers/misc/mikrobus/mikrobus_core.c
@@ -524,7 +524,7 @@ static int mikrobus_device_register(struct mikrobus_port *port,
 		if (!pdev)
 			return -ENOMEM;
 		if (dev->properties)
-			platform_device_add_properties(pdev, dev->properties);
+			device_create_managed_software_node(&pdev->dev, dev->properties, NULL);
 		dev->dev_client = pdev;
 		platform_device_add(dev->dev_client);
 		break;
-- 
2.30.2

